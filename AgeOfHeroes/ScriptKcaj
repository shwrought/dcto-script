--=====================================================
-- AutoFarming Hub v1
-- Clean UI â€¢ Structured â€¢ Stable
-- Author: dcto
-- UI Library: Rayfield (2026)
--=====================================================

--======================
-- SERVICES
--======================

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local Window = Rayfield:CreateWindow({
    Name = "autofarming HUB | v1.0",
    LoadingTitle = "Loading...",
    LoadingSubtitle = "by .dcto",
    Theme = "Bloom",           
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "MiHUB_Config", 
        FileName = "Settings"
    },
    Discord = {
        Enabled = false,          
        Invite = "TU_INVITE_AQUI",
        RememberJoins = true
    },
    KeySystem = false,            
    -- KeySettings = { ... }      
})

-- =====================================
-- UI SCALE
-- =====================================
task.spawn(function()
    local attempts = 0
    local maxAttempts = 20  
    local ScreenGui = nil
    
    while not ScreenGui and attempts < maxAttempts do
        ScreenGui = player.PlayerGui:FindFirstChild("Rayfield")
        if ScreenGui then break end
        task.wait(0.1)
        attempts += 1
    end
    
    if ScreenGui then
        local uiScale = Instance.new("UIScale")
        uiScale.Name = "HubScale"
        uiScale.Scale = 1.25  
        uiScale.Parent = ScreenGui
        print("Escala aplicada correctamente - HUB ahora mÃ¡s grande")
    else
        warn("No se encontrÃ³ Rayfield ScreenGui despuÃ©s de esperar. Intenta recargar el script.")
    end
end)

-- Sonido chÃ©vere al cargar (opcional)
Rayfield:Notify({
    Title = "Â¡HII!",
    Content = "I love you â€¢ Made by dcto",
    Duration = 4.5,
    Image = 4483362458,
    Actions = {},
})

-- TAB HOME (pantalla de bienvenida)
local HomeTab = Window:CreateTab("Home", "rewind")
local WelcomeSection = HomeTab:CreateSection("Main")
HomeTab:CreateParagraph({
    Title = "Welcome",
    Content =         
	    "Tenkiu for using my script ðŸ’—ðŸ’—" ..
        "" ..
        "" 
})

HomeTab:CreateParagraph({
    Title = "InformaciÃ³n",
    Content =         
	    "Version: 1.0\n" ..
        "Author: .dcto\n\n" ..
        "Focused on automation and farming systmes."
})

-- TAB UNIVERSAL
local UniTab = Window:CreateTab("Universal", "globe")
local UniSection = UniTab:CreateSection("General scripts")

-- Anti AFK
UniTab:CreateToggle({
    Name = "Anti AFK",
    CurrentValue = true,
    Flag = "AntiAFK",
    Callback = function(Value)
        local Players = game:GetService("Players")
        local VirtualUser = game:GetService("VirtualUser")
        if Value then
            Players.LocalPlayer.Idled:Connect(function()
                VirtualUser:Button2Down(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
                task.wait(1)
                VirtualUser:Button2Up(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
            end)
            Rayfield:Notify({Title="Anti AFK", Content="Activado", Duration=2})
        end
    end,
})

UniTab:CreateButton({
    Name = "ANTI LAG",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/shwrought/lag/refs/heads/main/Lag"))() 
    end
})

-- Infinite Yield
UniTab:CreateButton({
    Name = "Infinite Yield",
    Callback = function()
        loadstring(game:HttpGet('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'))()
        Rayfield:Notify({Title="Infinite Yield", Content="Cargado! Presiona F9 o escribe ;", Duration=4})
    end
})

-- Dex Explorer v4
UniTab:CreateButton({
    Name = "Dex Explorer v4",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Babyhamsta/RBLX_Scripts/main/Universal/DexExplorer.lua"))()
    end
})

UniTab:CreateButton({
    Name = "My old script",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/CeldaL/ewq/refs/heads/main/tupapi"))() 
    end
})


-- TAB AUTOFARMING
local AutoFarmTab = Window:CreateTab("autofarming", "zap")

-- SECCIÃ“N SUPER HEAVY RAPID PUNCH
local HeavyPunchSection = AutoFarmTab:CreateSection("Rapid Punch")
getgenv().SuperHeavyRapid = false
local PunchConnection = nil
AutoFarmTab:CreateToggle({
    Name = "Super Heavy Rapid Punch",
    CurrentValue = false,
    Flag = "SuperHeavyPunch",
    Callback = function(state)
        getgenv().SuperHeavyRapid = state
        
        local UserInputService = game:GetService("UserInputService")
        local ReplicatedStorage = game:GetService("ReplicatedStorage")
        local PunchEvent = ReplicatedStorage:WaitForChild("Events"):WaitForChild("Punch")
        
        if state then
            if not PunchConnection then
                PunchConnection = UserInputService.InputEnded:Connect(function(input, gameProcessed)
                    if gameProcessed then return end
                    if not getgenv().SuperHeavyRapid then return end
                    
                    if input.UserInputType == Enum.UserInputType.MouseButton1 then
                        for i = 1, 4 do
                            task.spawn(function()
                                for j = 1, 25 do
                                    pcall(function()
                                        PunchEvent:FireServer(0.4, 0.01, 1)
                                    end)
                                end
                            end)
                        end
                    end
                end)
            end
            
            Rayfield:Notify({
                Title = "Super Heavy Rapid ON",
                Content = "insane hits / lag",
                Duration = 3.5
            })
            
        else
            if PunchConnection then
                PunchConnection:Disconnect()
                PunchConnection = nil
            end
            
            Rayfield:Notify({
                Title = "Super Heavy Rapid OFF",
                Content = "Rapid detenido",
                Duration = 3
            })
        end
    end
})

-- SECCIÃ“N AUTO LOOP / ORBIT
local LoopSection = AutoFarmTab:CreateSection("Auto Loop / Orbit a Jugador")
getgenv().TargetPlayerName = ""
getgenv().LoopGotoEnabled = false
AutoFarmTab:CreateInput({
    Name = "Nombre del jugador objetivo",
    PlaceholderText = "Ej: alt",
    RemoveTextAfterFocusLost = false,
    Callback = function(Text)
        getgenv().TargetPlayerName = Text
        local target = findTarget()
        if target then
            Rayfield:Notify({Title = "âœ“ Jugador encontrado", Content = Text .. " estÃ¡ online", Duration = 3})
        else
            Rayfield:Notify({Title = "âš  No encontrado", Content = Text .. " no estÃ¡ en el server", Duration = 3})
        end
    end
})
local LoopToggle = AutoFarmTab:CreateToggle({
    Name = "Activar Auto Loop / Orbit",
    CurrentValue = false,
    Flag = "AutoLoop",
    Callback = function(Value)
        getgenv().LoopGotoEnabled = Value
        
        if Value then
            if getgenv().TargetPlayerName == "" then
                Rayfield:Notify({Title = "Error", Content = "Escribe el nombre primero", Duration = 4})
                LoopToggle:Set(false)
                return
            end
            Rayfield:Notify({Title = "Loop ACTIVADO", Content = "Â¡Orbitando suave!", Duration = 4})
        else
            Rayfield:Notify({Title = "Loop OFF", Content = "Detenido", Duration = 2})
        end
    end
})
AutoFarmTab:CreateButton({
    Name = "Stop & Reset",
    Callback = function()
        getgenv().LoopGotoEnabled = false
        LoopToggle:Set(false)
        if LoopConnection then LoopConnection:Disconnect() end
        Rayfield:Notify({Title = "Reset OK", Content = "Todo parado", Duration = 3})
    end
})

-- =====================================
-- NUEVA SECCIÃ“N: AUTOSTATS ULTRA FAST (Age of Heroes)
-- =====================================
local AutoStatsSection = AutoFarmTab:CreateSection("AutoStats Ultra Fast - Age of Heroes")

getgenv().AutoStats = false
getgenv().selectedstat = "vitality"
getgenv().PointsToSpend = 0   -- 0 = infinito
getgenv().SpentPoints = 0
getgenv().Threads = 25
getgenv().CallsPerThread = 25

local UpgradeAbility = game:GetService("ReplicatedStorage").Events.UpgradeAbility

-- Dropdown para seleccionar stat
AutoFarmTab:CreateDropdown({
    Name = "Seleccionar Stat",
    Options = {
        "vitality","healing","strength","energy","flight","speed",
        "climbing","swinging","fireball","frost","lightning",
        "power","telekinesis","shield","laserVision","metalSkin"
    },
    CurrentOption = "vitality",
    Callback = function(opt)
        getgenv().selectedstat = opt[1] or opt
        getgenv().SpentPoints = 0
    end
})

-- Input para cantidad de puntos
AutoFarmTab:CreateInput({
    Name = "Cantidad de puntos a gastar (0 = infinito)",
    PlaceholderText = "Ej: 500",
    RemoveTextAfterFocusLost = false,
    Callback = function(text)
        local n = tonumber(text)
        if n then
            getgenv().PointsToSpend = math.max(0, n)
            getgenv().SpentPoints = 0
            Rayfield:Notify({
                Title = "AutoStats",
                Content = n == 0 and "Modo infinito activado" or ("Se gastarÃ¡n " .. n .. " puntos"),
                Duration = 3
            })
        end
    end
})

-- FunciÃ³n principal de AutoStats
local function startAutoStats()
    getgenv().SpentPoints = 0
    
    if getgenv().PointsToSpend > 0 then
        -- Modo limitado
        local to_spend = getgenv().PointsToSpend
        Rayfield:Notify({
            Title = "AutoStats",
            Content = "Gastando exactamente " .. to_spend .. " puntos en " .. getgenv().selectedstat,
            Duration = 4
        })
        
        for i = 1, to_spend do
            task.spawn(function()
                UpgradeAbility:InvokeServer(getgenv().selectedstat)
            end)
        end
        
        getgenv().SpentPoints = to_spend
        getgenv().AutoStats = false
        
        Rayfield:Notify({
            Title = "AutoStats",
            Content = "Â¡Terminado! Gastados " .. to_spend .. " puntos âœ”",
            Duration = 4
        })
    else
        -- Modo infinito
        Rayfield:Notify({
            Title = "AutoStats",
            Content = "Modo INFINITO en " .. getgenv().selectedstat .. " (apaga el toggle para parar)",
            Duration = 5
        })
        
        task.spawn(function()
            while getgenv().AutoStats do
                for _ = 1, getgenv().Threads do
                    task.spawn(function()
                        for i = 1, getgenv().CallsPerThread do
                            if not getgenv().AutoStats then return end
                            UpgradeAbility:InvokeServer(getgenv().selectedstat)
                        end
                    end)
                end
                task.wait()
            end
        end)
    end
end

-- Toggle AutoStats
AutoFarmTab:CreateToggle({
    Name = "AutoStats ULTRA FAST",
    CurrentValue = false,
    Callback = function(v)
        getgenv().AutoStats = v
        if v then
            startAutoStats()
        end
    end
})

-- Botones rÃ¡pidos 
AutoFarmTab:CreateButton({
    Name = "All Points â†’ Vitality",
    Callback = function()
        getgenv().selectedstat = "vitality"
        getgenv().PointsToSpend = 0
        getgenv().SpentPoints = 0
        getgenv().AutoStats = true
        startAutoStats()
        Rayfield:Notify({
            Title = "AutoStats",
            Content = "Todos los puntos â†’ Vitality (infinito)",
            Duration = 3
        })
    end
})

AutoFarmTab:CreateButton({
    Name = "All Points â†’ Metal Skin",
    Callback = function()
        getgenv().selectedstat = "metalSkin"
        getgenv().PointsToSpend = 0
        getgenv().SpentPoints = 0
        getgenv().AutoStats = true
        startAutoStats()
        Rayfield:Notify({
            Title = "AutoStats",
            Content = "Todos los puntos â†’ Metal Skin (infinito)",
            Duration = 3
        })
    end
})

AutoFarmTab:CreateButton({
    Name = "ðŸ”¥ MAX SPEED (lag extremo)",
    Callback = function()
        getgenv().Threads = 40
        getgenv().CallsPerThread = 40
        getgenv().AutoStats = true
        startAutoStats()
        Rayfield:Notify({
            Title = "AutoStats",
            Content = "MAX SPEED activado (40Ã—40 calls por ciclo)",
            Duration = 4
        })
    end
})

-- =====================================
-- LÃ“GICA AUTO LOOP 
-- =====================================
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local VirtualUser = game:GetService("VirtualUser")
local player = Players.LocalPlayer
local LoopConnection = nil
local offsetUpdateTimer = 0

local function findTarget()
    local name = getgenv().TargetPlayerName or ""
    if name == "" then return nil end
    for _, plr in ipairs(Players:GetPlayers()) do
        if string.lower(plr.Name) == string.lower(name) or string.lower(plr.DisplayName) == string.lower(name) then
            return plr
        end
    end
    return nil
end

local function getCircleOffset(index, total)
    local radius = math.clamp(total * 1.2, 3.5, 5.5)
    local angle = ((index - 1) / total) * (2 * math.pi)
    return Vector3.new(math.cos(angle) * radius, 0, math.sin(angle) * radius)
end

local function getMyOffset()
    local clones = {}
    for _, plr in ipairs(Players:GetPlayers()) do table.insert(clones, plr) end
    table.sort(clones, function(a, b) return a.UserId < b.UserId end)
    local myIndex = 1
    for i, plr in ipairs(clones) do
        if plr == player then myIndex = i break end
    end
    return getCircleOffset(myIndex, #clones)
end

local myOffset = getMyOffset()
Players.PlayerAdded:Connect(function() if getgenv().LoopGotoEnabled then myOffset = getMyOffset() end end)
Players.PlayerRemoving:Connect(function() if getgenv().LoopGotoEnabled then myOffset = getMyOffset() end end)

local function setupCharacter(char)
    for _, part in pairs(char:GetDescendants()) do
        if part:IsA("BasePart") then
            part.CanCollide = false
        end
    end
    char.DescendantAdded:Connect(function(part)
        if part:IsA("BasePart") then
            part.CanCollide = false
        end
    end)
end

player.CharacterAdded:Connect(setupCharacter)
if player.Character then setupCharacter(player.Character) end

LoopConnection = RunService.Heartbeat:Connect(function(dt)
    if not getgenv().LoopGotoEnabled then return end
    
    pcall(function()
        offsetUpdateTimer += dt
        if offsetUpdateTimer >= 5 then
            myOffset = getMyOffset()
            offsetUpdateTimer = 0
        end
        
        local target = findTarget()
        if not target then return end
        
        local targetRoot = target.Character and target.Character:FindFirstChild("HumanoidRootPart")
        local root = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
        local humanoid = player.Character and player.Character:FindFirstChild("Humanoid")
        
        if root and targetRoot and humanoid then
            root.AssemblyLinearVelocity = Vector3.new(0, 0, 0)
            
            local targetPos = targetRoot.CFrame * CFrame.new(myOffset)
            root.CFrame = root.CFrame:Lerp(targetPos, 0.35)
            
            if (root.Position - targetRoot.Position).Magnitude > 25 then
                root.CFrame = targetPos
            end
            if root.Position.Y < -10 then
                root.CFrame = targetRoot.CFrame * CFrame.new(0, 5, 0)
            end
        end
    end)
end)

LoopToggle.Callback = function(Value)
    getgenv().LoopGotoEnabled = Value
    
    if Value then
        if getgenv().TargetPlayerName == "" then
            Rayfield:Notify({Title = "Error", Content = "Escribe el nombre primero", Duration = 4})
            LoopToggle:Set(false)
            return
        end
        Rayfield:Notify({Title = "Loop ACTIVADO", Content = "Â¡Orbitando suave!", Duration = 4})
    else
        local char = player.Character
        if char then
            local humanoid = char:FindFirstChild("Humanoid")
            if humanoid then
                humanoid:ChangeState(Enum.HumanoidStateType.GettingUp)
                humanoid.PlatformStand = false
            end
            for _, part in pairs(char:GetDescendants()) do
                if part:IsA("BasePart") and (part.Name == "Left Leg" or part.Name == "Right Leg" or part.Name == "HumanoidRootPart") then
                    part.CanCollide = true
                end
            end
        end
        Rayfield:Notify({Title = "Loop OFF", Content = "Detenido y reseteado", Duration = 2})
    end
end

-- Anti AFK extra global 
player.Idled:Connect(function()
    VirtualUser:Button2Down(Vector2.new(), workspace.CurrentCamera.CFrame)
    task.wait(1)
    VirtualUser:Button2Up(Vector2.new(), workspace.CurrentCamera.CFrame)
end)
